<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UA Friend Match - University of Alabama</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-crimson fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#">
          <i class="bi bi-people-fill me-2"></i>
          <span class="fw-bold">UA Friend Match</span>
        </a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto" id="mainNavLinks" style="display: none;">
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showSection('home')">
                <i class="bi bi-house me-1"></i>Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showSection('messages')">
                <i class="bi bi-chat me-1"></i>Messages
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showSection('profile')">
                <i class="bi bi-person me-1"></i>My Profile
              </a>
            </li>
          </ul>
          
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="../../Resources/dashboard.html">
                <i class="bi bi-arrow-left me-1"></i>Back to Dashboard
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="toggleDarkMode()">
                <i class="bi bi-moon-fill" id="darkModeIcon"></i>
                <span id="darkModeText">Dark Mode</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Profile Creation Section (Always shown first) -->
      <section id="profileCreation" class="profile-creation-section">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="profile-creation-card">
                <div class="text-center mb-4">
                  <i class="bi bi-person-plus-fill profile-icon"></i>
                  <h1 class="profile-title">Welcome to UA Friend Match!</h1>
                  <p class="profile-subtitle">Create your profile to start connecting with fellow students</p>
                </div>
                
                <div class="alert alert-info text-center mb-4">
                  <i class="bi bi-info-circle me-2"></i>
                  <strong>Profile Required:</strong> You must create a profile to access the friend matching features.
                </div>
                
                <div class="text-center">
                  <button class="btn btn-primary btn-lg" onclick="showProfileForm()">
                    <i class="bi bi-person-gear me-2"></i>Create My Profile
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Profile Form Section (Hidden initially) -->
      <section id="profileForm" class="profile-form-section" style="display: none;">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="profile-form-card">
                <div class="text-center mb-4">
                  <h2>Create Your Profile</h2>
                  <p class="text-muted">Tell us about yourself to find your perfect friend matches</p>
                </div>
                
                <form id="profileFormElement">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label for="firstName" class="form-label">First Name *</label>
                      <input type="text" class="form-control" id="firstName" required>
                    </div>
                    <div class="col-md-6">
                      <label for="lastName" class="form-label">Last Name *</label>
                      <input type="text" class="form-control" id="lastName" required>
                    </div>
                    <div class="col-md-6">
                      <label for="major" class="form-label">Major *</label>
                      <input type="text" class="form-control" id="major" required>
                    </div>
                    <div class="col-md-6">
                      <label for="year" class="form-label">Academic Year *</label>
                      <select class="form-select" id="year" required>
                        <option value="">Select Year</option>
                        <option value="freshman">Freshman</option>
                        <option value="sophomore">Sophomore</option>
                        <option value="junior">Junior</option>
                        <option value="senior">Senior</option>
                        <option value="graduate">Graduate</option>
                      </select>
                    </div>
                    <div class="col-12">
                      <label for="bio" class="form-label">Bio</label>
                      <textarea class="form-control" id="bio" rows="4" placeholder="Tell others about yourself, your interests, and what you're looking for in friends..."></textarea>
                    </div>
                    <div class="col-12">
                      <label class="form-label">Interests & Hobbies</label>
                      <div class="interests-container">
                        <div class="selected-interests mb-3" id="selectedInterests">
                          <!-- Dynamic interest badges will be added here -->
                        </div>
                        <div class="add-interest-section">
                          <select class="form-select" id="interestSelect">
                            <option value="">Select an interest to add...</option>
                            <option value="Programming">Programming</option>
                            <option value="Gaming">Gaming</option>
                            <option value="Sports">Sports</option>
                            <option value="Music">Music</option>
                            <option value="Art">Art</option>
                            <option value="Reading">Reading</option>
                            <option value="Travel">Travel</option>
                            <option value="Cooking">Cooking</option>
                            <option value="Fitness">Fitness</option>
                            <option value="Movies">Movies</option>
                            <option value="Photography">Photography</option>
                            <option value="Dancing">Dancing</option>
                            <option value="Volunteering">Volunteering</option>
                          </select>
                          <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addInterest()">Add Interest</button>
                        </div>
                      </div>
                    </div>
                    <div class="col-12">
                      <label class="form-label">What I'm Looking For</label>
                      <div class="looking-for-container">
                        <div class="looking-for-items mb-3" id="lookingForItems">
                          <div class="looking-for-item">
                            <input type="text" class="form-control" placeholder="What are you looking for in friends?">
                            <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeLookingFor(this)">
                              <i class="bi bi-x"></i>
                            </button>
                          </div>
                        </div>
                        <button type="button" class="btn btn-outline-success btn-sm" onclick="addLookingFor()">
                          <i class="bi bi-plus"></i> Add Item
                        </button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="text-center mt-4">
                    <button type="button" class="btn btn-secondary me-3" onclick="goBackToPrompt()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">
                      <i class="bi bi-check-circle me-2"></i>Create Profile
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Main App Content (Hidden until profile created) -->
      <div id="mainAppContent" style="display: none;">
        <!-- Home Section -->
        <section id="home" class="content-section">
          <div class="container">
            <div class="page-header text-center mb-5">
              <h1>Find Your Perfect Friend Match</h1>
              <p class="lead">Connect with fellow University of Alabama students who share your interests, hobbies, and goals.</p>
            </div>
            
            <div class="row g-4">
              <div class="col-md-6">
                <div class="feature-card">
                  <div class="feature-icon">
                    <i class="bi bi-people-fill"></i>
                  </div>
                  <h3>Potential Matches</h3>
                  <p>Find students with similar interests and backgrounds.</p>
                  <button class="btn btn-primary" onclick="findMatches()">Find Matches</button>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="feature-card">
                  <div class="feature-icon">
                    <i class="bi bi-heart-fill"></i>
                  </div>
                  <h3>My Connections</h3>
                  <p>View your current friends and connections.</p>
                  <button class="btn btn-secondary" onclick="viewConnections()">View Messages</button>
                </div>
              </div>
            </div>
            
            <!-- Potential Matches Section -->
            <div class="row mt-5">
              <div class="col-12">
                <h2 class="text-center mb-4">Potential Matches</h2>
                <div class="potential-matches-container" id="potentialMatchesContainer">
                  <div class="text-center">
                    <div class="empty-potential-matches">
                      <div class="empty-icon mb-3">
                        <i class="bi bi-people" style="font-size: 4rem; color: #dc143c; opacity: 0.3;"></i>
                      </div>
                      <h4 class="text-muted">No potential matches yet</h4>
                      <p class="text-muted">Click "Find Matches" to discover people you might connect with!</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>


        <!-- Messages Section -->
        <section id="messages" class="content-section" style="display: none;">
          <div class="container">
            <div class="page-header">
              <h1>Messages</h1>
              <p class="lead">Chat with your matches</p>
            </div>
            
            <div class="messages-container">
              <div class="row">
                <!-- Matched Users List -->
                <div class="col-md-4">
                  <div class="matched-users-panel">
                    <h4 class="mb-3">Your Matches</h4>
                    <div id="matchedUsersList" class="matched-users-list">
                      <!-- Matched users will be dynamically loaded here -->
                    </div>
                  </div>
                </div>
                
                <!-- Chat Area -->
                <div class="col-md-8">
                  <div class="chat-panel">
                    <div id="chatArea" class="chat-area">
                      <div class="empty-chat-state text-center">
                        <div class="empty-icon mb-3">
                          <i class="bi bi-chat" style="font-size: 4rem; color: #dc143c; opacity: 0.3;"></i>
                        </div>
                        <h4 class="text-muted">Select a match to start chatting</h4>
                        <p class="text-muted">Choose someone from your matches to begin a conversation!</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- My Profile Section -->
        <section id="profile" class="content-section" style="display: none;">
          <div class="container">
            <div class="page-header">
              <h1>My Profile</h1>
              <p class="lead">Manage your profile and preferences</p>
            </div>
            
            <div class="profile-container">
              <div class="profile-header">
                <div class="profile-avatar-large">
                  <i class="bi bi-person-circle"></i>
                </div>
                <div class="profile-info">
                  <h2 id="profileName">Your Name</h2>
                  <p class="text-muted" id="profileDetails">Major • Year</p>
                  <button class="btn btn-primary" onclick="editProfile()">
                    <i class="bi bi-pencil me-2"></i>Edit Profile
                  </button>
                </div>
              </div>
              
              <div class="profile-sections">
                <div class="profile-section">
                  <h4>About Me</h4>
                  <p id="profileBio">Your bio will appear here...</p>
                </div>
                
                <div class="profile-section">
                  <h4>Interests & Hobbies</h4>
                  <div class="interests" id="profileInterests">
                    <!-- Dynamic interests will be added here -->
                  </div>
                </div>
                
                <div class="profile-section">
                  <h4>What I'm Looking For</h4>
                  <ul id="profileLookingFor">
                    <!-- Dynamic looking for items will be added here -->
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Custom JS -->
    <script src="./script.js"></script>
  </body>
</html>