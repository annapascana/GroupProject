<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ========================================
         TRAVEL PAGE HEAD SECTION
         ======================================== -->
    
    <!-- Basic HTML Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- Page Title and SEO Meta Tags -->
    <title>UA Student Travel Finder - Find Safe Travel Buddies & Split Costs</title>
    <meta name="description" content="Connect with UA students for safe travel, split gas costs, and plan trips together. Find travel buddies for airport trips, weekend getaways, and away games.">
    <meta name="keywords" content="University of Alabama, travel, carpool, gas sharing, student travel, safe travel, travel buddies">
    <meta name="author" content="UA Student Travel Finder">
    
    <!-- External CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    
    <!-- Google Fonts - Inter Font Family -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS Stylesheet -->
    <link rel="stylesheet" href="travel.css">

</head>
<body>

<div class="container-fluid p-3">

    <!-- ========================================
         TOP NAVIGATION BAR
         ======================================== -->
    <nav class="travel-navbar mb-3">
        <div class="row align-items-center">
            <!-- Left Side: Home Button and Page Title -->
            <div class="col-md-6">
                <div class="nav-left">
                    <!-- Dashboard Button - Returns to Dashboard -->
                    <button class="btn btn-outline-primary btn-sm me-3" onclick="window.location.href='../../Resources/dashboard.html'">
                        <i class="bi bi-house-door"></i> Dashboard
                    </button>
                    <!-- Main Page Title with Airplane Icon -->
                    <h1 class="page-title"><i class="bi bi-airplane"></i> UA Student Travel Finder</h1>
                </div>
            </div>
            
            <!-- Right Side: User Profile and Controls -->
            <div class="col-md-6 text-md-end text-center mt-2 mt-md-0">
                <div class="nav-right">
                    <!-- Create Trip Button -->
                    <button class="btn btn-primary btn-sm me-3" data-bs-toggle="modal" data-bs-target="#createTripModal">
                        <i class="bi bi-plus-circle"></i> Create Trip
                    </button>
                    
                    <!-- User Profile Dropdown Container -->
                    <div class="user-profile me-3" id="userProfile" data-bs-toggle="dropdown" aria-expanded="false">
                        <!-- Profile Avatar with Emergency Warning Indicator -->
                        <div class="profile-avatar">
                            <i class="bi bi-person-circle"></i>
                            <!-- Emergency Warning Badge (hidden by default, shown when no emergency contacts) -->
                            <span class="emergency-warning" id="emergencyWarning" style="display: none;" title="Emergency contacts required">
                                <i class="bi bi-exclamation-triangle-fill"></i>
                            </span>
                        </div>
                        <!-- User Information Display -->
                        <div class="profile-info">
                            <div class="profile-name" id="profileName">Loading...</div>
                            <div class="profile-email" id="profileEmail">Loading...</div>
                        </div>
                    </div>
                    <ul class="dropdown-menu dropdown-menu-end" id="profileDropdown">
                        <li><h6 class="dropdown-header">Profile Settings</h6></li>
                        <li><a class="dropdown-item" href="#" onclick="openEmergencyContactsModal()">
                            <i class="bi bi-shield-check"></i> Emergency Contacts
                            <span class="badge bg-warning ms-2" id="emergencyBadge" style="display: none;">Required</span>
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="logout()">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a></li>
                    </ul>
                    <button class="btn btn-outline-secondary btn-sm me-2" id="refreshBtn">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <button class="btn btn-outline-info btn-sm me-2" id="notificationBtn" data-bs-toggle="modal" data-bs-target="#notificationModal">
                        <i class="bi bi-bell"></i>
                        <span class="badge bg-danger position-absolute top-0 start-100 translate-middle" id="notificationBadge" style="display: none;">0</span>
                    </button>
                    <button class="btn btn-outline-dark btn-sm" id="themeToggle">
                        <i class="bi bi-moon" id="themeIcon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="travel-header mb-4">
        <div class="row align-items-center">
            <div class="col-md-12">
                <div class="header-content">
                    <p class="lead">Find safe travel buddies, split costs, and plan trips with UA classmates!</p>
                    
                    <!-- Stats and Analytics Row -->
                    <div class="stats-analytics-row d-flex justify-content-between align-items-center">
                        <!-- Stats Section (left side) -->
                        <div class="stats-section">
                            <div class="header-stats">
                                <div class="stat-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span id="resultsCount">0 trips found</span>
                                </div>
                                <div class="stat-item">
                                    <i class="bi bi-clock"></i>
                                    <span id="activeTripsCount">0 active</span>
                                </div>
                                <div class="stat-item">
                                    <i class="bi bi-person-check"></i>
                                    <span id="myTripsCount">0 my trips</span>
                                </div>
                                <div class="stat-item">
                                    <i class="bi bi-currency-dollar"></i>
                                    <span id="avgCost">$0 avg cost</span>
                                </div>
                                <div class="stat-item">
                                    <i class="bi bi-graph-up"></i>
                                    <span id="totalSavings">$0 saved</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Analytics Dropdown (right side) -->
                        <div class="analytics-dropdown">
                            <button class="btn btn-outline-info btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#analyticsContent" aria-expanded="false" aria-controls="analyticsContent">
                                <i class="bi bi-trophy"></i> Popular Trips & Analytics
                                <i class="bi bi-chevron-down" id="analyticsChevron"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Collapsible Analytics Content -->
                    <div class="collapse" id="analyticsContent">
                        <div class="analytics-cards mt-3">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <div class="analytics-card">
                                        <div class="analytics-icon">
                                            <i class="bi bi-trophy"></i>
                                        </div>
                                        <div class="analytics-content">
                                            <h6>Popular Destination</h6>
                                            <p id="popularDestination">Atlanta Airport</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="analytics-card">
                                        <div class="analytics-icon">
                                            <i class="bi bi-clock"></i>
                                        </div>
                                        <div class="analytics-content">
                                            <h6>Peak Travel Time</h6>
                                            <p id="peakTravelTime">Friday 3-5 PM</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="analytics-card">
                                        <div class="analytics-icon">
                                            <i class="bi bi-people"></i>
                                        </div>
                                        <div class="analytics-content">
                                            <h6>Active Travelers</h6>
                                            <p id="activeTravelers">127 students</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="analytics-card">
                                        <div class="analytics-icon">
                                            <i class="bi bi-star-fill"></i>
                                        </div>
                                        <div class="analytics-content">
                                            <h6>Average Rating</h6>
                                            <p id="averageRating">4.8/5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <!-- Search & Filter -->
    <div class="search-section mb-4">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="search-bar position-relative">
                    <i class="bi bi-search position-absolute"></i>
                    <input type="text" id="searchInput" class="form-control" placeholder="Search destinations, trip types, or classmates">
                    <button class="btn btn-outline-secondary position-absolute" id="clearSearchBtn" style="right: 10px; top: 50%; transform: translateY(-50%); display: none;">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-2">
                 <select id="tripTypeFilter" class="form-select">
                     <option value="all">All Trip Types</option>
                     <option value="airport">✈️ Airport Trips</option>
                     <option value="home">🏠 Trips Home</option>
                     <option value="weekend">🏖️ Weekend Getaways</option>
                     <option value="awaygames">🏈 Away Games</option>
                     <option value="other">📍 Other</option>
                 </select>
            </div>
            <div class="col-md-2">
                <select id="sortFilter" class="form-select">
                    <option value="date">Sort by Date</option>
                    <option value="cost">Sort by Cost</option>
                    <option value="seats">Sort by Available Seats</option>
                    <option value="destination">Sort by Destination</option>
                </select>
            </div>
            <div class="col-md-2">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="showFullTrips" onchange="toggleFullTrips()">
                    <label class="form-check-label" for="showFullTrips">
                        Show Full Trips
                    </label>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <div class="filter-tags" id="activeFilters">
                    <!-- Active filter tags will appear here -->
                </div>
            </div>
        </div>
    </div>


     <!-- Trip Tabs -->
     <ul class="nav nav-tabs mb-4" id="tripTabs" role="tablist">
         <li class="nav-item" role="presentation">
            <button class="nav-link active" id="active-trips-tab" data-bs-toggle="tab" data-bs-target="#active-trips" type="button" role="tab">
                <i class="bi bi-clock"></i> Available Trips
                <span class="badge bg-primary ms-2" id="availableTripsBadge">0</span>
            </button>
         </li>
         <li class="nav-item" role="presentation">
             <button class="nav-link" id="my-trips-tab" data-bs-toggle="tab" data-bs-target="#my-trips" type="button" role="tab">
                 <i class="bi bi-person-check"></i> My Trips
                 <span class="badge bg-success ms-2" id="myTripsBadge">0</span>
             </button>
         </li>
         <li class="nav-item" role="presentation">
             <button class="nav-link" id="past-trips-tab" data-bs-toggle="tab" data-bs-target="#past-trips" type="button" role="tab">
                 <i class="bi bi-clock-history"></i> Past Trips
                 <span class="badge bg-secondary ms-2" id="pastTripsBadge">0</span>
             </button>
         </li>
     </ul>

     <!-- ========================================
          TRIP CONTENT AREAS
          ======================================== -->
     <div class="tab-content" id="tripTabsContent">
         <div class="tab-pane fade show active" id="active-trips" role="tabpanel">
             <div class="loading-state" id="activeTripsLoading" style="display: none;">
                 <div class="text-center py-5">
                     <div class="spinner-border text-primary" role="status">
                         <span class="visually-hidden">Loading...</span>
                     </div>
                     <p class="mt-3 text-muted">Loading available trips...</p>
                 </div>
             </div>
             <div class="trips-grid" id="tripsGrid"></div>
             <div class="empty-state" id="activeTripsEmpty" style="display: none;">
                <div class="text-center py-5">
                    <i class="bi bi-clock" style="font-size: 4rem; color: #6c757d;"></i>
                    <h4 class="mt-3 text-muted">No available trips</h4>
                    <p class="text-muted">Be the first to create a trip or check back later!</p>
                    <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#createTripModal">
                         <i class="bi bi-plus-circle"></i> Create First Trip
                     </button>
                 </div>
             </div>
         </div>
        <div class="tab-pane fade" id="my-trips" role="tabpanel">
            <div class="loading-state" id="myTripsLoading" style="display: none;">
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3 text-muted">Loading your trips...</p>
                </div>
            </div>
            <div class="trips-grid" id="myTripsGrid"></div>
            <div class="empty-state" id="myTripsEmpty" style="display: none;">
                <div class="text-center py-5">
                    <i class="bi bi-person-x" style="font-size: 4rem; color: #6c757d;"></i>
                    <h4 class="mt-3 text-muted">No trips yet</h4>
                    <p class="text-muted">Join a trip or create your own to get started!</p>
                </div>
            </div>
        </div>
         <div class="tab-pane fade" id="past-trips" role="tabpanel">
             <div class="trips-grid" id="pastTripsGrid"></div>
             <div class="empty-state" id="pastTripsEmpty" style="display: none;">
                 <div class="text-center py-5">
                     <i class="bi bi-clock-history" style="font-size: 4rem; color: #6c757d;"></i>
                     <h4 class="mt-3 text-muted">No past trips</h4>
                     <p class="text-muted">Expired trips will appear here automatically.</p>
                 </div>
             </div>
         </div>
     </div>

    <!-- ========================================
         MODALS SECTION
         ======================================== -->
    
    <!-- Create Trip Modal -->
    <div class="modal fade" id="createTripModal" tabindex="-1" aria-labelledby="createTripModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createTripModalLabel"><i class="bi bi-plus-circle"></i> Create New Trip</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createTripForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Trip Type</label>
                                 <select id="tripType" class="form-select" required>
                                     <option value="">Select Type</option>
                                     <option value="airport">Airport Trip</option>
                                     <option value="home">Trip Home</option>
                                     <option value="weekend">Weekend Getaway</option>
                                     <option value="awaygames">Away Games</option>
                                     <option value="other">Other</option>
                                 </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Destination</label>
                                <input type="text" id="destination" class="form-control" placeholder="Enter destination" required>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-md-6">
                                <label class="form-label">Date</label>
                                <input type="date" id="tripDate" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Time</label>
                                <input type="time" id="tripTime" class="form-control" required>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-md-6">
                                <label class="form-label">Total Seats</label>
                                <input type="number" id="totalSeats" class="form-control" min="1" max="8" value="4" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Total Gas Cost ($)</label>
                                <input type="number" id="gasCost" class="form-control" step="0.01" placeholder="0.00" required>
                                <small id="gasCostPreview" class="text-muted">0.00 per person</small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="form-label">Notes</label>
                            <textarea id="tripNotes" class="form-control" rows="3" placeholder="Additional information..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary" id="createTripBtn">Create Trip</button>
                </div>
            </div>
        </div>
    </div>

    </div>

    <!-- Chat Modal -->
    <div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="chatModalLabel">
                        <i class="bi bi-chat-dots"></i> Trip Chat
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <!-- Messages will be loaded here -->
                        </div>
                        <div class="chat-input">
                            <div class="input-group">
                                <input type="text" class="form-control" id="chatInput" placeholder="Type your message...">
                                <button class="btn btn-primary" type="button" id="sendMessageBtn">
                                    <i class="bi bi-send"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationModalLabel">
                        <i class="bi bi-bell"></i> Notifications
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="notification-list" id="notificationList">
                        <!-- Notifications will be dynamically added here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" id="clearAllBtn" onclick="clearAllNotifications()">
                        <i class="bi bi-trash"></i> Clear All
                    </button>
                    <button type="button" class="btn btn-outline-secondary" id="markAllReadBtn" onclick="markAllNotificationsRead()">
                        <i class="bi bi-check-all"></i> Mark All Read
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Trip Groups Modal -->
    <div class="modal fade" id="tripGroupsModal" tabindex="-1" aria-labelledby="tripGroupsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tripGroupsModalLabel">
                        <i class="bi bi-people"></i> Trip Groups & Social Feed
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="socialTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="groups-tab" data-bs-toggle="tab" data-bs-target="#groups" type="button" role="tab">
                                <i class="bi bi-people"></i> Trip Groups
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="feed-tab" data-bs-toggle="tab" data-bs-target="#feed" type="button" role="tab">
                                <i class="bi bi-chat-square-text"></i> Social Feed
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content" id="socialTabContent">
                        <div class="tab-pane fade show active" id="groups" role="tabpanel">
                            <div class="trip-groups-list" id="tripGroupsList">
                                <!-- Trip groups will be dynamically added here -->
                            </div>
                        </div>
                        <div class="tab-pane fade" id="feed" role="tabpanel">
                            <div class="social-feed">
                                <div class="post-composer">
                                    <div class="composer-header">
                                        <h6><i class="bi bi-pencil-square"></i> Share Something</h6>
                                    </div>
                                    <div class="composer-body">
                                        <textarea class="form-control" id="postContent" placeholder="Share your travel experience, ask for advice, or connect with other travelers..." rows="3"></textarea>
                                        <div class="composer-actions">
                                            <div class="composer-options">
                                                <button class="btn btn-outline-secondary btn-sm" onclick="addLocationToPost()">
                                                    <i class="bi bi-geo-alt"></i> Add Location
                                                </button>
                                                <button class="btn btn-outline-secondary btn-sm" onclick="addTripToPost()">
                                                    <i class="bi bi-car-front"></i> Add Trip
                                                </button>
                                            </div>
                                            <button class="btn btn-primary btn-sm" onclick="createPost()">
                                                <i class="bi bi-send"></i> Post
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="feed-posts" id="socialFeedPosts">
                                    <!-- Posts will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="createGroupBtn">Create Group</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Contacts Modal -->
    <div class="modal fade" id="emergencyContactsModal" tabindex="-1" aria-labelledby="emergencyContactsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="emergencyContactsModalLabel">
                        <i class="bi bi-shield-check"></i> Emergency Contacts
                        <span class="badge bg-warning ms-2" id="emergencyRequiredBadge" style="display: none;">Required</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning" id="emergencyAlert" style="display: none;">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Emergency contacts are required for your safety!</strong> Please add at least one emergency contact to continue using the travel app.
                    </div>
                    <div class="emergency-contacts">
                        <!-- Manual Contact Entry Form -->
                        <div class="add-contact-form mb-4">
                            <h6><i class="bi bi-person-plus"></i> Add Emergency Contact</h6>
                            <form id="emergencyContactForm">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="contactName" class="form-label">Full Name *</label>
                                        <input type="text" class="form-control" id="contactName" name="name" required 
                                               placeholder="Enter full name">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="contactRelationship" class="form-label">Relationship *</label>
                                        <select class="form-select" id="contactRelationship" name="relationship" required>
                                            <option value="">Select relationship</option>
                                            <option value="Parent">Parent</option>
                                            <option value="Guardian">Guardian</option>
                                            <option value="Sibling">Sibling</option>
                                            <option value="Spouse">Spouse</option>
                                            <option value="Friend">Friend</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="contactPhone" class="form-label">Phone Number *</label>
                                        <input type="tel" class="form-control" id="contactPhone" name="phone" required 
                                               placeholder="(555) 123-4567" maxlength="14">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="contactEmail" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="contactEmail" name="email" 
                                               placeholder="contact@example.com">
                                    </div>
                                    <div class="col-12">
                                        <label for="contactNotes" class="form-label">Additional Notes</label>
                                        <textarea class="form-control" id="contactNotes" name="notes" rows="2" 
                                                  placeholder="Any additional information about this contact..."></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="bi bi-plus"></i> Add Contact
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary ms-2" onclick="clearContactForm()">
                                            <i class="bi bi-arrow-clockwise"></i> Clear Form
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>


                        <!-- Default Emergency Contacts -->
                        <div class="default-contacts mb-4">
                            <h6><i class="bi bi-shield-check"></i> Default Emergency Contacts</h6>
                            <div class="contact-list" id="defaultContactList">
                                <div class="contact-item">
                                    <div class="contact-info">
                                        <strong>Emergency Services</strong>
                                        <span class="contact-phone">911</span>
                                    </div>
                                    <button class="btn btn-outline-danger btn-sm" onclick="callEmergency('911')">
                                        <i class="bi bi-telephone"></i> Call
                                    </button>
                                </div>
                                <div class="contact-item">
                                    <div class="contact-info">
                                        <strong>Campus Security</strong>
                                        <span class="contact-phone">(205) 348-5454</span>
                                    </div>
                                    <button class="btn btn-outline-warning btn-sm" onclick="callEmergency('(205) 348-5454')">
                                        <i class="bi bi-telephone"></i> Call
                                    </button>
                                </div>
                                <div class="contact-item">
                                    <div class="contact-info">
                                        <strong>UA Police</strong>
                                        <span class="contact-phone">(205) 348-5454</span>
                                    </div>
                                    <button class="btn btn-outline-info btn-sm" onclick="callEmergency('(205) 348-5454')">
                                        <i class="bi bi-telephone"></i> Call
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- User's Custom Contacts -->
                        <div class="user-contacts">
                            <h6><i class="bi bi-list"></i> Your Emergency Contacts</h6>
                            <div class="contact-list" id="emergencyContactList">
                                <!-- User contacts will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="saveEmergencyContacts()">Save Contacts</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Safety Modal -->
    <div class="modal fade" id="safetyModal" tabindex="-1" aria-labelledby="safetyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="safetyModalLabel">
                        <i class="bi bi-shield-check"></i> Safety Center
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="safety-content">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Emergency Contacts</h6>
                                <div class="emergency-contacts">
                                        <div class="contact-list" id="safetyEmergencyContactList">
                                            <div class="contact-item">
                                                <strong>Emergency Services:</strong> 911
                                                <button class="btn btn-outline-danger btn-sm ms-2" onclick="callEmergency('911')">Call</button>
                                            </div>
                                            <div class="contact-item">
                                                <strong>Campus Security:</strong> (205) 348-5454
                                                <button class="btn btn-outline-warning btn-sm ms-2" onclick="callEmergency('(205) 348-5454')">Call</button>
                                            </div>
                                            <div class="contact-item">
                                                <strong>UA Police:</strong> (205) 348-5454
                                                <button class="btn btn-outline-info btn-sm ms-2" onclick="callEmergency('(205) 348-5454')">Call</button>
                                            </div>
                                        </div>
                                        
                                        <!-- User's Emergency Contacts -->
                                        <div class="mt-4">
                                            <h6><i class="bi bi-person-check"></i> Your Emergency Contacts</h6>
                                            <div class="contact-list" id="safetyUserContactsList">
                                                <!-- User contacts will be loaded here -->
                                            </div>
                                        </div>
                                        
                                        <div class="text-center mt-3">
                                            <p class="text-muted mb-3">To add emergency contacts, use the Emergency Contacts section in your profile.</p>
                                            <button class="btn btn-outline-primary btn-sm" onclick="manageEmergencyContactsFromSafety()">
                                                <i class="bi bi-person-plus"></i> Manage Emergency Contacts
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>Safety Checklist</h6>
                                <div class="safety-checklist">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="shareLocation">
                                        <label class="form-check-label" for="shareLocation">Share location with friends</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="verifyDriver">
                                        <label class="form-check-label" for="verifyDriver">Verify driver identity</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkVehicle">
                                        <label class="form-check-label" for="checkVehicle">Check vehicle condition</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- ========================================
         FLOATING ACTION BUTTON
         ======================================== -->
    <div class="fab-container">
        <button class="fab-main" id="fabMain">
            <i class="bi bi-plus"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <button class="fab-item" data-bs-toggle="modal" data-bs-target="#createTripModal" title="Create Trip">
                <i class="bi bi-plus-circle"></i>
            </button>
            <button class="fab-item" data-bs-toggle="modal" data-bs-target="#tripGroupsModal" title="Trip Groups">
                <i class="bi bi-people"></i>
            </button>
            <button class="fab-item" data-bs-toggle="modal" data-bs-target="#safetyModal" title="Safety Center">
                <i class="bi bi-shield-check"></i>
            </button>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer">
        <!-- Toasts will be dynamically added here -->
    </div>

    <!-- ========================================
         SCRIPTS SECTION
         ======================================== -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- User Manager -->
    <script src="../../Resources/Scripts/userManager.js"></script>
    <!-- Shared Data Service -->
    <script src="shared-data-service.js"></script>
    <!-- Cross-User Data Test (remove in production) -->
    <script src="test-cross-user-data.js"></script>
    <script src="travel.js"></script>
</body>
</html>
