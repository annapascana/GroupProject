<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>UA Student Travel Finder - Find Safe Travel Buddies & Split Costs</title>
<meta name="description" content="Connect with UA students for safe travel, split gas costs, and plan trips together. Find travel buddies for airport trips, weekend getaways, and away games.">
<meta name="keywords" content="University of Alabama, travel, carpool, gas sharing, student travel, safe travel, travel buddies">
<meta name="author" content="UA Student Travel Finder">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="travel.css">
</head>
<body>

<div class="container-fluid p-3">

    <!-- Navigation Bar -->
    <nav class="travel-navbar mb-3">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="nav-left">
                    <button class="btn btn-outline-primary btn-sm me-3" onclick="window.location.href='../../Resources/dashboard.html'">
                        <i class="bi bi-house-door"></i> Home
                    </button>
                    <h1 class="page-title"><i class="bi bi-airplane"></i> UA Student Travel Finder</h1>
                </div>
            </div>
            <div class="col-md-6 text-md-end text-center mt-2 mt-md-0">
                <div class="nav-right">
                    <div class="user-profile me-3" id="userProfile">
                        <div class="profile-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="profile-info">
                            <div class="profile-name" id="profileName">Loading...</div>
                            <div class="profile-email" id="profileEmail">Loading...</div>
                        </div>
                    </div>
                    <button class="btn btn-outline-secondary btn-sm" id="refreshBtn">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="travel-header mb-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <div class="header-content">
                    <p class="lead">Find safe travel buddies, split costs, and plan trips with UA classmates!</p>
                    <div class="header-stats">
                        <div class="stat-item">
                            <i class="bi bi-people-fill"></i>
                            <span id="resultsCount">0 trips found</span>
                        </div>
                        <div class="stat-item">
                            <i class="bi bi-calendar-check"></i>
                            <span id="activeTripsCount">0 active</span>
                        </div>
                        <div class="stat-item">
                            <i class="bi bi-person-check"></i>
                            <span id="myTripsCount">0 my trips</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 text-md-end text-center mt-3 mt-md-0">
                <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#createTripModal">
                    <i class="bi bi-plus-circle"></i> Create Trip
                </button>
            </div>
        </div>
    </header>

    <!-- Search & Filter -->
    <div class="search-section mb-4">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="search-bar position-relative">
                    <i class="bi bi-search position-absolute"></i>
                    <input type="text" id="searchInput" class="form-control" placeholder="Search destinations, trip types, or classmates">
                    <button class="btn btn-outline-secondary position-absolute" id="clearSearchBtn" style="right: 10px; top: 50%; transform: translateY(-50%); display: none;">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-3">
                 <select id="tripTypeFilter" class="form-select">
                     <option value="all">All Trip Types</option>
                     <option value="airport">‚úàÔ∏è Airport Trips</option>
                     <option value="home">üè† Trips Home</option>
                     <option value="weekend">üèñÔ∏è Weekend Getaways</option>
                     <option value="awaygames">üèà Away Games</option>
                     <option value="other">üìç Other</option>
                 </select>
            </div>
            <div class="col-md-3">
                <select id="sortFilter" class="form-select">
                    <option value="date">Sort by Date</option>
                    <option value="cost">Sort by Cost</option>
                    <option value="seats">Sort by Available Seats</option>
                    <option value="destination">Sort by Destination</option>
                </select>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <div class="filter-tags" id="activeFilters">
                    <!-- Active filter tags will appear here -->
                </div>
            </div>
        </div>
    </div>

     <!-- Trip Tabs -->
     <ul class="nav nav-tabs mb-4" id="tripTabs" role="tablist">
         <li class="nav-item" role="presentation">
             <button class="nav-link active" id="active-trips-tab" data-bs-toggle="tab" data-bs-target="#active-trips" type="button" role="tab">
                 <i class="bi bi-calendar-check"></i> Available Trips
                 <span class="badge bg-primary ms-2" id="availableTripsBadge">0</span>
             </button>
         </li>
         <li class="nav-item" role="presentation">
             <button class="nav-link" id="my-trips-tab" data-bs-toggle="tab" data-bs-target="#my-trips" type="button" role="tab">
                 <i class="bi bi-person-check"></i> My Trips
                 <span class="badge bg-success ms-2" id="myTripsBadge">0</span>
             </button>
         </li>
         <li class="nav-item" role="presentation">
             <button class="nav-link" id="past-trips-tab" data-bs-toggle="tab" data-bs-target="#past-trips" type="button" role="tab">
                 <i class="bi bi-clock-history"></i> Past Trips
                 <span class="badge bg-secondary ms-2" id="pastTripsBadge">0</span>
             </button>
         </li>
         <li class="nav-item" role="presentation">
             <button class="nav-link" id="full-trips-tab" data-bs-toggle="tab" data-bs-target="#full-trips" type="button" role="tab">
                 <i class="bi bi-people-fill"></i> Full Trips
                 <span class="badge bg-warning ms-2" id="fullTripsBadge">0</span>
             </button>
         </li>
     </ul>

     <!-- Tab Content -->
     <div class="tab-content" id="tripTabsContent">
         <div class="tab-pane fade show active" id="active-trips" role="tabpanel">
             <div class="loading-state" id="activeTripsLoading" style="display: none;">
                 <div class="text-center py-5">
                     <div class="spinner-border text-primary" role="status">
                         <span class="visually-hidden">Loading...</span>
                     </div>
                     <p class="mt-3 text-muted">Loading available trips...</p>
                 </div>
             </div>
             <div class="trips-grid" id="tripsGrid"></div>
             <div class="empty-state" id="activeTripsEmpty" style="display: none;">
                 <div class="text-center py-5">
                     <i class="bi bi-calendar-x" style="font-size: 4rem; color: #6c757d;"></i>
                     <h4 class="mt-3 text-muted">No available trips</h4>
                     <p class="text-muted">Be the first to create a trip or check back later!</p>
                     <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#createTripModal">
                         <i class="bi bi-plus-circle"></i> Create First Trip
                     </button>
                 </div>
             </div>
         </div>
         <div class="tab-pane fade" id="my-trips" role="tabpanel">
             <div class="trips-grid" id="myTripsGrid"></div>
             <div class="empty-state" id="myTripsEmpty" style="display: none;">
                 <div class="text-center py-5">
                     <i class="bi bi-person-x" style="font-size: 4rem; color: #6c757d;"></i>
                     <h4 class="mt-3 text-muted">No trips yet</h4>
                     <p class="text-muted">Join a trip or create your own to get started!</p>
                 </div>
             </div>
         </div>
         <div class="tab-pane fade" id="past-trips" role="tabpanel">
             <div class="trips-grid" id="pastTripsGrid"></div>
             <div class="empty-state" id="pastTripsEmpty" style="display: none;">
                 <div class="text-center py-5">
                     <i class="bi bi-clock-history" style="font-size: 4rem; color: #6c757d;"></i>
                     <h4 class="mt-3 text-muted">No past trips</h4>
                     <p class="text-muted">Expired trips will appear here automatically.</p>
                 </div>
             </div>
         </div>
         <div class="tab-pane fade" id="full-trips" role="tabpanel">
             <div class="trips-grid" id="fullTripsGrid"></div>
             <div class="empty-state" id="fullTripsEmpty" style="display: none;">
                 <div class="text-center py-5">
                     <i class="bi bi-people-x" style="font-size: 4rem; color: #6c757d;"></i>
                     <h4 class="mt-3 text-muted">No full trips</h4>
                     <p class="text-muted">Trips that reach capacity will appear here.</p>
                 </div>
             </div>
         </div>
     </div>

    <!-- Create Trip Modal -->
    <div class="modal fade" id="createTripModal" tabindex="-1" aria-labelledby="createTripModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createTripModalLabel"><i class="bi bi-plus-circle"></i> Create New Trip</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createTripForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Trip Type</label>
                                 <select id="tripType" class="form-select" required>
                                     <option value="">Select Type</option>
                                     <option value="airport">Airport Trip</option>
                                     <option value="home">Trip Home</option>
                                     <option value="weekend">Weekend Getaway</option>
                                     <option value="awaygames">Away Games</option>
                                     <option value="other">Other</option>
                                 </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Destination</label>
                                <input type="text" id="destination" class="form-control" placeholder="Enter destination" required>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-md-6">
                                <label class="form-label">Date</label>
                                <input type="date" id="tripDate" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Time</label>
                                <input type="time" id="tripTime" class="form-control" required>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-md-6">
                                <label class="form-label">Total Seats</label>
                                <input type="number" id="totalSeats" class="form-control" min="1" max="8" value="4" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Total Gas Cost ($)</label>
                                <input type="number" id="gasCost" class="form-control" step="0.01" placeholder="0.00" required>
                                <small id="gasCostPreview" class="text-muted">0.00 per person</small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="form-label">Notes</label>
                            <textarea id="tripNotes" class="form-control" rows="3" placeholder="Additional information..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary" id="createTripBtn">Create Trip</button>
                </div>
            </div>
        </div>
    </div>

    </div>

    <!-- Chat Modal -->
    <div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="chatModalLabel">
                        <i class="bi bi-chat-dots"></i> Trip Chat
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <!-- Messages will be loaded here -->
                        </div>
                        <div class="chat-input">
                            <div class="input-group">
                                <input type="text" class="form-control" id="chatInput" placeholder="Type your message...">
                                <button class="btn btn-primary" type="button" id="sendMessageBtn">
                                    <i class="bi bi-send"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer">
        <!-- Toasts will be dynamically added here -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- User Manager -->
    <script src="../../Resources/Scripts/userManager.js"></script>
    <script src="travel.js"></script>
</body>
</html>
